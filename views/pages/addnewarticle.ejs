<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <%- include('../templates/header-include')-%>
</head>
<body>
    <% if(articleCreated == false) {%>
    <form id="form1" method="post">
        <div class="container-fluid">

            <div class='row p-2' id="diverror" style="display: none;">
                <div class='col-sm-12'>
                    <div class='alert alert-danger'>
                        <strong>
                            <span id="lblerror" style="color:red"></span>
                        </strong>
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-sm-4">
                    Title
                </div>
                <div class="col-sm-8">
                    <input type="text" id="txtarticletitle" name="txtarticletitle" class="form-control" required="required" />
                </div>

            </div>

            <div class="row">

                <div class="col-sm-12">
                    &nbsp;
                </div>

            </div>

            <div class="row">

                <div class="col-sm-4">
                    Author
                </div>
                <div class="col-sm-8">
                    <input type="text" id="txtarticleauthor" name="txtarticleauthor" class="form-control" required="required" />
                </div>

            </div>

            <div class="row">

                <div class="col-sm-12">
                    &nbsp;
                </div>

            </div>

            <div class="row">

                <div class="col-sm-4">
                    Body
                </div>
                <div class="col-sm-8">
                    <textarea id="txtarticlebody" name="txtarticlebody" class="form-control" Rows="10" Width="99%" required="required"></textarea>
                </div>

            </div>

            <div class="row">

                <div class="col-sm-12">
                    &nbsp;
                </div>

            </div>

            <div class="row">

                <div class="col-sm-4">
                    Article Image
                </div>
                <div class="col-sm-8">
                    <input type="file" id="fileArticleImage" class="form-control" style="width: 99%" onchange="readFile()" />
                    <img id="imagArticlePreview" src="" class="img-fluid" style="max-width: 200px; margin-top: 5px" />
                    <input type="hidden" id="hdnarticleimage" name="hdnarticleimage" value="" />
                    <script type="text/javascript">
                        function readFile() {

                            document.getElementById("imagArticlePreview").src = "";
                           

                            if (!document.getElementById("fileArticleImage").files || !document.getElementById("fileArticleImage").files[0]) return;

                            const FR = new FileReader();

                            FR.addEventListener("load", function (evt) {
                                document.getElementById("hdnarticleimage").value = evt.target.result;
                        document.getElementById("imagArticlePreview").src = evt.target.result;
                        //document.querySelector("#b64").textContent = evt.target.result;
                    });

                            FR.readAsDataURL(document.getElementById("fileArticleImage").files[0]);

                        }

                        //document.querySelector("#fileArticleImage").addEventListener("change", readFile);
                    </script>
                </div>

            </div>

            <div class="row">

                <div class="col-sm-12">
                    &nbsp;
                </div>

            </div>

            <div class="row">

                <div class="col-sm-12 text-center">
                    <input type="submit" id="btnAdd" name="btnAdd" class="btn btn-danger" value="Add" />
                </div>

            </div>


            <div class="row">

                <div class="col-sm-12">
                    &nbsp;
                </div>

            </div>

        </div>
    </form>
    <%}else {%>
        <script type='text/javascript'>parent.newArticleAdded();</script>
    <%}%>
</body>
</html>